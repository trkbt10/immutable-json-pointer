"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function j(e){const r=e.slice(0,-1),t=e.at(-1);return[r,t]}function E(e){return e==="__proto__"||e==="constructor"||e==="prototype"}function I(e,r){return v(e)?Object.prototype.hasOwnProperty.call(e,r):!1}function v(e){return typeof e=="object"&&e!==null}function p(e){return Array.isArray(e)?[...e]:v(e)?{...e}:e}function A(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function _(e){return e.replace(/\~1/g,"/").replace(/\~0/g,"~")}function m(e){if(e.startsWith("#")){const r=decodeURIComponent(e).replace(/^#/,"");return m(r)}return e.split("/").map(_)}function O(e,r){return typeof a(e,r,()=>{})<"u"}function w(e,r){if(e.length===0)return"";const t=e.map(n=>typeof n=="number"?n:A(n));return r==="uri"?`#/${t.map(encodeURIComponent).join("/")}`:"/"+t.join("/")}function a(e,r,t){const[n,...u]=m(r);if((n===void 0||n==="")&&u.length===0)return t&&t(e,"",void 0,[]),e;let o=e,s;for(const i of u){if(E(i))throw new Error("Prototype pollution attempt");if(!I(o,i)){if(t){o=void 0;break}throw new Error(`Cannot find ${i} in ${JSON.stringify(o)}`)}s=o,o=o[i]}if(t){const[i,f]=j(u);t(o,f,s,i)}return o}function S(e,r){return a(e,r)}function K(e,r){let t=p(e);return a(t,r,(n,u,o,s)=>{const i=p(o),f=w(s);if(Array.isArray(i)){const l=+u;i.splice(l,1),t=d(t,f,i)}else delete i[u],t=d(t,f,i)}),t}function L(e){const r={},t=(n,u)=>{for(const o in n){const s=n[o];if(v(s)){const i=[...u,o];t(s,i);continue}r[w([...u,o])]=s}};return t(e,[]),r}function d(e,r,t){let n=p(e);return a(e,r,(o,s,i,f)=>{var P;if(o===t)return;const l=f.length;let y=0,c=n;do{const g=f[y],h=y>=l;if(h&&Array.isArray(c)){s==="-"?c.push(t):c[+s]=t;return}if(h&&s===""){n=t;return}if(h){c[s]=t;return}const $=(P=c[g])!=null?P:{};c[g]=p($),c=c[g]}while(++y<=l)}),n}function C(e,r){if(O(e,r))return S(e,r)}function M(e,r,t){const n=C(e,r),u=t(n);return d(e,r,u)}exports.compile=w;exports.dict=L;exports.escape=A;exports.get=S;exports.has=O;exports.parse=m;exports.read=C;exports.remove=K;exports.resolve=a;exports.set=d;exports.transform=M;exports.unescape=_;
