"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function j(e){const r=e.slice(0,-1),t=e.at(-1);return[r,t]}function A(e){return typeof e=="object"&&e!==null}function _(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function S(e){return e.replace(/\~1/g,"/").replace(/\~0/g,"~")}function h(e){if(e.startsWith("#")){const r=decodeURIComponent(e).replace(/^#/,"");return h(r)}return e.split("/").map(S)}function P(e,r){return typeof a(e,r,()=>{})<"u"}function m(e,r){if(e.length===0)return"";const t=e.map(o=>typeof o=="number"?o:_(o));return r==="uri"?`#/${t.map(encodeURIComponent).join("/")}`:"/"+t.join("/")}function a(e,r,t){const[o,...u]=h(r);if((o===void 0||o==="")&&u.length===0)return t&&t(e,"",void 0,[]),e;let i=e,s;for(const n of u){if(n==="__proto__"||n==="constructor"||n==="prototype")throw new Error("Prototype pollution attempt");if(!(n in i)){if(t){i=void 0;break}throw new Error(`Cannot find ${n} in ${JSON.stringify(i)}`)}s=i,i=i[n]}if(t){const[n,f]=j(u);t(i,f,s,n)}return i}function C(e,r){return a(e,r)}function E(e,r){let t=d(e);return a(t,r,(o,u,i,s)=>{const n=d(i),f=m(s);if(Array.isArray(n)){const p=+u;n.splice(p,1),t=l(t,f,n)}else delete n[u],t=l(t,f,n)}),t}function I(e){const r={},t=(o,u)=>{for(const i in o){const s=o[i];if(A(s)){const n=[...u,i];t(s,n);continue}r[m([...u,i])]=s}};return t(e,[]),r}function l(e,r,t){let o=d(e);return a(e,r,(i,s,n,f)=>{var w;if(i===t)return;const p=f.length;let g=0,c=o;do{const v=f[g],y=g>=p;if(y&&Array.isArray(c)){s==="-"?c.push(t):c[+s]=t;return}if(y&&s===""){o=t;return}if(y){c[s]=t;return}const $=(w=c[v])!=null?w:{};c[v]=d($),c=c[v]}while(++g<=p)}),o}function O(e,r){if(P(e,r))return C(e,r)}function L(e,r,t){const o=O(e,r),u=t(o);return l(e,r,u)}function d(e){return Array.isArray(e)?[...e]:A(e)?{...e}:e}exports.compile=m;exports.dict=I;exports.escape=_;exports.get=C;exports.has=P;exports.parse=h;exports.read=O;exports.remove=E;exports.resolve=a;exports.set=l;exports.transform=L;exports.unescape=S;
