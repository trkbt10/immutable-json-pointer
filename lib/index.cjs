"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function l(t,r,e){var a;if(r.startsWith("#")){const n=decodeURIComponent(r).replace(/^#/,"");return l(t,n,e)}const[c,...u]=r.split("/").map(w);if(c===""&&u.length===0)return t;let o=t,s;for(const n of u){if(n==="__proto__"||n==="constructor"||n==="prototype")throw new Error("Prototype pollution attempt");if(!(n in o)){if(e){o=void 0;break}throw new Error(`Cannot find ${n} in ${JSON.stringify(o)}`)}s=o,o=o[n]}if(e){const n=u.slice(0,-1),p=(a=u.at(-1))!=null?a:"";e(o,p,s,n)}return o}function v(t){const r=t.map(e=>typeof e=="number"?e:e.replace(/~/g,"~0").replace(/\//g,"~1")).join("/");return"/"+r}function h(t,r){return l(t,r)}function y(t,r,e){const c={...t};return l(t,r,(o,s,a,n)=>{if(o===e)return;const p=n.length;let g=0,i=c;do{const f=n[g],d=g>=p;if(d&&Array.isArray(i)){s==="-"?i.push(e):i[+s]=e;return}if(d){i[s]=e;return}const m=i[f];Array.isArray(m)?i[f]=[...m]:i[f]={...m},i=i[f]}while(++g<=p)}),c}function _(t){return{get:r=>h(r,t),set:(r,e)=>y(r,t,e)}}function w(t){return t.replace(/\~1/g,"/").replace(/\~0/g,"~")}exports.compile=_;exports.get=h;exports.resolver=l;exports.set=y;exports.toPointer=v;
