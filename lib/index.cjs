"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function $(e){const t=e.slice(0,-1),r=e.at(-1);return[t,r]}function v(e){return typeof e=="object"&&e!==null}function w(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function A(e){return e.replace(/\~1/g,"/").replace(/\~0/g,"~")}function d(e){if(e.startsWith("#")){const t=decodeURIComponent(e).replace(/^#/,"");return d(t)}return e.split("/").map(A)}function _(e,t){return typeof f(e,t,()=>{})<"u"}function S(e,t){const r=e.map(o=>typeof o=="number"?o:w(o));return t==="uri"?`#/${r.map(encodeURIComponent).join("/")}`:"/"+r.join("/")}function f(e,t,r){const[o,...s]=d(t);if(o===""&&s.length===0)return e;let n=e,c;for(const u of s){if(u==="__proto__"||u==="constructor"||u==="prototype")throw new Error("Prototype pollution attempt");if(!(u in n)){if(r){n=void 0;break}throw new Error(`Cannot find ${u} in ${JSON.stringify(n)}`)}c=n,n=n[u]}if(r){const[u,a]=$(s);r(n,a,c,u)}return n}function P(e,t){return f(e,t)}function E(e,t){const r={...e};return f(e,t,(o,s,n)=>{Array.isArray(n)?n.splice(Number(s),1):delete n[s]}),r}function I(e){const t={},r=(o,s)=>{for(const n in o){const c=o[n];if(v(c)){const u=[...s,n];r(c,u);continue}t[S([...s,n])]=c}};return r(e,[]),t}function b(e,t,r){const o=h(e);return f(e,t,(n,c,u,a)=>{var g;if(n===r)return;const y=a.length;let l=0,i=o;do{const p=a[l],m=l>=y;if(m&&Array.isArray(i)){c==="-"?i.push(r):i[+c]=r;return}if(m){i[c]=r;return}const O=(g=i[p])!=null?g:{};i[p]=h(O),i=i[p]}while(++l<=y)}),o}function C(e,t){if(_(e,t))return P(e,t)}function L(e,t,r){const o=C(e,t),s=r(o);return b(e,t,s)}function h(e){return Array.isArray(e)?[...e]:v(e)?{...e}:e}exports.compile=S;exports.dict=I;exports.escape=w;exports.get=P;exports.has=_;exports.parse=d;exports.read=C;exports.remove=E;exports.resolve=f;exports.set=b;exports.transform=L;exports.unescape=A;
