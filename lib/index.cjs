"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function A(e){const r=e.slice(0,-1),t=e.at(-1);return[r,t]}function _(e){return typeof e=="object"&&e!==null}function h(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function v(e){return e.replace(/\~1/g,"/").replace(/\~0/g,"~")}function y(e){if(e.startsWith("#")){const r=decodeURIComponent(e).replace(/^#/,"");return y(r)}return e.split("/").map(v)}function S(e,r){return typeof a(e,r,()=>{})<"u"}function w(e){const r=e.map(t=>typeof t=="number"?t:h(t)).join("/");return"/"+r}function a(e,r,t){const[u,...s]=y(r);if(u===""&&s.length===0)return e;let n=e,i;for(const o of s){if(o==="__proto__"||o==="constructor"||o==="prototype")throw new Error("Prototype pollution attempt");if(!(o in n)){if(t){n=void 0;break}throw new Error(`Cannot find ${o} in ${JSON.stringify(n)}`)}i=n,n=n[o]}if(t){const[o,f]=A(s);t(n,f,i,o)}return n}function P(e,r){return a(e,r)}function b(e,r){const t={...e};return a(e,r,(u,s,n)=>{Array.isArray(n)?n.splice(Number(s),1):delete n[s]}),t}function O(e){const r={},t=(u,s)=>{for(const n in u){const i=u[n];if(_(i)){const o=[...s,n];t(i,o);continue}r[w([...s,n])]=i}};return t(e,[]),r}function C(e,r,t){const u={...e};return a(e,r,(n,i,o,f)=>{if(n===t)return;const g=f.length;let p=0,c=u;do{const l=f[p],m=p>=g;if(m&&Array.isArray(c)){i==="-"?c.push(t):c[+i]=t;return}if(m){c[i]=t;return}const d=c[l];Array.isArray(d)?c[l]=[...d]:c[l]={...d},c=c[l]}while(++p<=g)}),u}exports.compile=w;exports.dict=O;exports.escape=h;exports.get=P;exports.has=S;exports.parse=y;exports.remove=b;exports.resolve=a;exports.set=C;exports.unescape=v;
