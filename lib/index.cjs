"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function O(e){const t=e.slice(0,-1),r=e.at(-1);return[t,r]}function h(e){return typeof e=="object"&&e!==null}function v(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function w(e){return e.replace(/\~1/g,"/").replace(/\~0/g,"~")}function d(e){if(e.startsWith("#")){const t=decodeURIComponent(e).replace(/^#/,"");return d(t)}return e.split("/").map(w)}function A(e,t){return typeof f(e,t,()=>{})<"u"}function _(e,t){const r=e.map(o=>typeof o=="number"?o:v(o));return t==="uri"?`#/${r.map(encodeURIComponent).join("/")}`:"/"+r.join("/")}function f(e,t,r){const[o,...s]=d(t);if(o===""&&s.length===0)return e;let n=e,c;for(const u of s){if(u==="__proto__"||u==="constructor"||u==="prototype")throw new Error("Prototype pollution attempt");if(!(u in n)){if(r){n=void 0;break}throw new Error(`Cannot find ${u} in ${JSON.stringify(n)}`)}c=n,n=n[u]}if(r){const[u,a]=O(s);r(n,a,c,u)}return n}function S(e,t){return f(e,t)}function $(e,t){const r={...e};return f(e,t,(o,s,n)=>{Array.isArray(n)?n.splice(Number(s),1):delete n[s]}),r}function E(e){const t={},r=(o,s)=>{for(const n in o){const c=o[n];if(h(c)){const u=[...s,n];r(c,u);continue}t[_([...s,n])]=c}};return r(e,[]),t}function P(e,t,r){const o=m(e);return f(e,t,(n,c,u,a)=>{if(n===r)return;const y=a.length;let l=0,i=o;do{const p=a[l],g=l>=y;if(g&&Array.isArray(i)){c==="-"?i.push(r):i[+c]=r;return}if(g){i[c]=r;return}const C=i[p];i[p]=m(C),i=i[p]}while(++l<=y)}),o}function b(e,t){if(A(e,t))return S(e,t)}function I(e,t,r){const o=b(e,t),s=r(o);return P(e,t,s)}function m(e){return Array.isArray(e)?[...e]:h(e)?{...e}:e}exports.compile=_;exports.dict=E;exports.escape=v;exports.get=S;exports.has=A;exports.parse=d;exports.read=b;exports.remove=$;exports.resolve=f;exports.set=P;exports.transform=I;exports.unescape=w;
