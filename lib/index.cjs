"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function j(e){const r=e.slice(0,-1),t=e.at(-1);return[r,t]}function E(e){return e==="__proto__"||e==="constructor"||e==="prototype"}function I(e,r){return m(e)?Object.prototype.hasOwnProperty.call(e,r):!1}function m(e){return typeof e=="object"&&e!==null}function d(e){return Array.isArray(e)?[...e]:m(e)?{...e}:e}function v(e){return typeof e=="number"?v(e.toString()):e.replace(/~/g,"~0").replace(/\//g,"~1")}function S(e){return e.replace(/\~1/g,"/").replace(/\~0/g,"~")}function A(e){if(e.startsWith("#")){const t=decodeURIComponent(e).replace(/^#/,"");return A(t)}return e.split("/").map(S)}function _(e,r){return typeof a(e,r,()=>{})<"u"}function w(e,r){if(e.length===0)return"";const t=e.map(v).join("/"),n=t.startsWith("/")?"":"/";return r==="uri"?`#${n}${encodeURIComponent(t)}`:n+t}function a(e,r,t){const[n,...u]=A(r);if((n===void 0||n==="")&&u.length===0)return t&&t(e,"",void 0,[]),e;let o=e,c;for(const s of u){if(E(s))throw new Error("Prototype pollution attempt");if(!I(o,s)){if(t){o=void 0;break}throw new Error(`Cannot find ${s} in ${JSON.stringify(o)}`)}c=o,o=o[s]}if(t){const[s,f]=j(u);t(o,f,c,s)}return o}function O(e,r){return a(e,r)}function K(e,r){let t=d(e);return a(t,r,(n,u,o,c)=>{if(typeof n>"u")return;const s=d(o),f=w(c);if(Array.isArray(s)){const l=+u;s.splice(l,1),t=p(t,f,s)}else delete s[u],t=p(t,f,s)}),t}function L(e){const r={},t=(n,u)=>{for(const o in n){const c=n[o];if(m(c)){const s=[...u,o];t(c,s);continue}r[w([...u,o])]=c}};return t(e,[]),r}function M(e,r){return(Array.isArray(e)?e:Object.entries(e)).reduce((n,[u,o])=>p(n,u,o),r!=null?r:{})}function p(e,r,t){let n=d(e);return a(e,r,(o,c,s,f)=>{var P;if(o===t)return;const l=f.length;let y=0,i=n;do{const h=f[y],g=y>=l;if(g&&Array.isArray(i)){c==="-"?i.push(t):i[+c]=t;return}if(g&&c===""){n=t;return}if(g){i[c]=t;return}const C=(P=i[h])!=null?P:{};i[h]=d(C),i=i[h]}while(++y<=l)}),n}function $(e,r){if(_(e,r))return O(e,r)}function U(e,r,t){const n=$(e,r),u=t(n);return p(e,r,u)}exports.compile=w;exports.compose=M;exports.dict=L;exports.escape=v;exports.get=O;exports.has=_;exports.parse=A;exports.read=$;exports.remove=K;exports.resolve=a;exports.set=p;exports.transform=U;exports.unescape=S;
