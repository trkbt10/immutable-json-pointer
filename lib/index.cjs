"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function E(e){const r=e.slice(0,-1),t=e.at(-1);return[r,t]}function I(e){return e==="__proto__"||e==="constructor"||e==="prototype"}function K(e,r){return v(e)?Object.prototype.hasOwnProperty.call(e,r):!1}function v(e){return typeof e=="object"&&e!==null}function p(e){return Array.isArray(e)?[...e]:v(e)?{...e}:e}function m(e){return typeof e=="number"?m(e.toString()):e.replace(/~/g,"~0").replace(/\//g,"~1")}function S(e){return e.replace(/\~1/g,"/").replace(/\~0/g,"~")}function w(e){if(e.startsWith("#")){const t=decodeURIComponent(e).replace(/^#/,"");return w(t)}return e.split("/").map(S)}function _(e,r){return typeof a(e,r,()=>{})<"u"}function P(e,r){if(e.length===0)return"";const t=e.map(m).join("/"),o=t.startsWith("/")?"":"/";return r==="uri"?`#${o}${encodeURIComponent(t)}`:o+t}function a(e,r,t){const[o,...u]=w(r);if((o===void 0||o==="")&&u.length===0)return t&&t(e,"",void 0,[]),e;let n=e,s;for(const i of u){if(I(i))throw new Error("Prototype pollution attempt");if(!K(n,i)){if(t){n=void 0;break}throw new Error(`Cannot find ${i} in ${JSON.stringify(n)}`)}s=n,n=n[i]}if(t){const[i,f]=E(u);t(n,f,s,i)}return n}function O(e,r){return a(e,r)}function L(e,r){let t=p(e);return a(t,r,(o,u,n,s)=>{const i=p(n),f=P(s);if(Array.isArray(i)){const l=+u;i.splice(l,1),t=d(t,f,i)}else delete i[u],t=d(t,f,i)}),t}function M(e){const r={},t=(o,u)=>{for(const n in o){const s=o[n];if(v(s)){const i=[...u,n];t(s,i);continue}r[P([...u,n])]=s}};return t(e,[]),r}function d(e,r,t){let o=p(e);return a(e,r,(n,s,i,f)=>{var A;if(n===t)return;const l=f.length;let h=0,c=o;do{const y=f[h],g=h>=l;if(g&&Array.isArray(c)){s==="-"?c.push(t):c[+s]=t;return}if(g&&s===""){o=t;return}if(g){c[s]=t;return}const C=(A=c[y])!=null?A:{};c[y]=p(C),c=c[y]}while(++h<=l)}),o}function $(e,r){if(_(e,r))return O(e,r)}function R(e,r,t){const o=$(e,r),u=t(o);return d(e,r,u)}exports.compile=P;exports.dict=M;exports.escape=m;exports.get=O;exports.has=_;exports.parse=w;exports.read=$;exports.remove=L;exports.resolve=a;exports.set=d;exports.transform=R;exports.unescape=S;
